name: ðŸŒž Auto Update Astro Data

on:
  schedule:
    - cron: '30 18 * * *'   # à¤¹à¤° à¤¦à¤¿à¤¨ à¤°à¤¾à¤¤ 12 à¤¬à¤œà¥‡ IST (18:30 UTC)
  workflow_dispatch:

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v4

      - name: Update Astro JSON
        run: |
          current_date=$(date -u +%Y-%m-%d)
          echo "{
            \"date\": \"$current_date\",
            \"rashifal\": {
              \"à¤®à¥‡à¤·\": \"à¤†à¤œ à¤†à¤ªà¤•à¤¾ à¤†à¤¤à¥à¤®à¤µà¤¿à¤¶à¥à¤µà¤¾à¤¸ à¤¬à¤¢à¤¼à¥‡à¤—à¤¾à¥¤\",
              \"à¤µà¥ƒà¤·à¤­\": \"à¤§à¤¨ à¤²à¤¾à¤­ à¤•à¥‡ à¤¯à¥‹à¤— à¤¬à¤¨ à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚à¥¤\",
              \"à¤®à¤¿à¤¥à¥à¤¨\": \"à¤®à¤¿à¤¤à¥à¤°à¥‹à¤‚ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤…à¤šà¥à¤›à¤¾ à¤¸à¤®à¤¯ à¤¬à¥€à¤¤à¥‡à¤—à¤¾à¥¤\",
              \"à¤•à¤°à¥à¤•\": \"à¤•à¤¾à¤°à¥à¤¯ à¤®à¥‡à¤‚ à¤¸à¤«à¤²à¤¤à¤¾ à¤®à¤¿à¤²à¥‡à¤—à¥€à¥¤\",
              \"à¤¸à¤¿à¤‚à¤¹\": \"à¤®à¤¾à¤¨-à¤¸à¤®à¥à¤®à¤¾à¤¨ à¤¬à¤¢à¤¼à¥‡à¤—à¤¾à¥¤\",
              \"à¤•à¤¨à¥à¤¯à¤¾\": \"à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯ à¤®à¥‡à¤‚ à¤¸à¥à¤§à¤¾à¤° à¤¹à¥‹à¤—à¤¾à¥¤\",
              \"à¤¤à¥à¤²à¤¾\": \"à¤ªà¤°à¤¿à¤µà¤¾à¤° à¤®à¥‡à¤‚ à¤–à¥à¤¶à¤¿à¤¯à¤¾à¤ à¤†à¤à¤‚à¤—à¥€à¥¤\",
              \"à¤µà¥ƒà¤¶à¥à¤šà¤¿à¤•\": \"à¤¨à¤ˆ à¤œà¤¿à¤®à¥à¤®à¥‡à¤¦à¤¾à¤°à¥€ à¤®à¤¿à¤²à¥‡à¤—à¥€à¥¤\",
              \"à¤§à¤¨à¥\": \"à¤¯à¤¾à¤¤à¥à¤°à¤¾ à¤•à¥‡ à¤¯à¥‹à¤— à¤¹à¥ˆà¤‚à¥¤\",
              \"à¤®à¤•à¤°\": \"à¤†à¤°à¥à¤¥à¤¿à¤• à¤²à¤¾à¤­ à¤¸à¤‚à¤­à¤µà¥¤\",
              \"à¤•à¥à¤‚à¤­\": \"à¤¨à¤ˆ à¤¶à¥à¤°à¥à¤†à¤¤ à¤•à¥‡ à¤¸à¤‚à¤•à¥‡à¤¤à¥¤\",
              \"à¤®à¥€à¤¨\": \"à¤®à¤¨ à¤ªà¥à¤°à¤¸à¤¨à¥à¤¨ à¤°à¤¹à¥‡à¤—à¤¾à¥¤\"
            }
          }" > rashifal.json

          echo "{
            \"date\": \"$current_date\",
            \"hindi\": \"à¥ à¤¨à¤®à¤ƒ à¤¶à¤¿à¤µà¤¾à¤¯à¥¤\",
            \"english\": \"Om Namah Shivaya â€“ a mantra for peace and strength.\"
          }" > daily_mantra.json

          echo "{
            \"date\": \"$current_date\",
            \"hindi\": {\"tithi\": \"à¤¤à¥ƒà¤¤à¥€à¤¯à¤¾\", \"nakshatra\": \"à¤§à¤¨à¤¿à¤·à¥à¤ à¤¾\"},
            \"english\": {\"tithi\": \"Tritiya\", \"nakshatra\": \"Dhanishta\"}
          }" > panchang.json

      - name: Commit and Push Changes
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add .
          git commit -m "ðŸ”® Auto update astro data on $current_date" || echo "No changes to commit"
          git push
